	.syntax unified
	.text
	.global main
main:
	ldr		r1,=Status		//Load address of status into r1
	ldrb	r1,[r1]			//Load value of status into r1
	ldr		r2,=Control		//Load address of control into r2
	ldrb	r2,[r2]			//Load value of control into r2
	ldr		r3,=Periph		//Load address of periph into r3
	ldrb	r3,[r3]			//Load value of periph into r3
	tst		r1,0xEF			//Check if bit 4 of status is 0
	beq		set0			//If bit 4 of status is 0 branch to set0
	orr		r2,0x04			//Set bit 2 of control to 1
set0:
	bic		r2,0xF7			//Set bit 3 of control to 0
	tst		r1,0xF9			//Check if bits 1 and 2 of status are 0
	beq		set1			//If bit 2 of status is 0 branch to set1
	orr		r2,0x40			//Set bit 6 of control to 1
set1:
	bic		r2,0xDF			//Set bit 5 of control to 0
	bic		r3,0x8F			//Clear bits 6-3 in prep to replace
	orr		r3,0x50			//Replace cleared bits with 5s


// Data section starts at 0x20000000
	.data
Status:		.byte	0xC1	//Allocates 8-bits of memory
Control:	.byte 	0xA8	//Allocates 8-bits of memory
Periph:		.byte	0xD2	//Allocates 8-bits of memory
			.end			//End of source file
