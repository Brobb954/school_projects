	.syntax unified
	.text
	.global main
main:
	// Load status, control, and periph values
	ldr		r1,=Status
	ldrb	r2,[r1]

	ldr		r2,=Control
	ldrb	r3,[r2]

	ldr		r3,=Periph
	ldrb	r4,[r3]

	// Check if bit 4 of status is 0
	tst		r2,0x10
	beq		set0

	orr		r3,0x04			// Set bit 2 of control to 1

set0:
	bic		r3,0xF7			//Set bit 3 of control to 0
	strb	r3,[r2]			// Store changed bits

	// Check if bits 1 and 2 of status are 0
	tst		r2,0x06
	beq		set1


	orr		r3,0x40			//Set bit 6 of control to 1
set1:
	bic		r3,0xDF			//Set bit 5 of control to 0
	strb	r3,[r2]			// Store changed bit


	// Replace bits 6-3 of periph with hex 5
	bic		r4,0x8F			//Clear bits 6-3 in prep to replace
	orr		r4,0x50			//Replace cleared bits with 5s
	strb	r4,[r3]
	b		.

// Data section starts at 0x20000000
	.data
Status:		.byte	0xC1	//Allocates 8-bits of memory
Control:	.byte 	0xA8	//Allocates 8-bits of memory
Periph:		.byte	0xD2	//Allocates 8-bits of memory
			.end			//End of source file
